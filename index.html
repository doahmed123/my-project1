<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene>
      <!-- النموذج ثلاثي الأبعاد -->
      <a-entity
        gltf-model="https://raw.githubusercontent.com/doahmed123/my-project1/main/the_great_pyramid_of_giza_egypt.glb"
        position="0 1 -3"
        scale="1 1 1"
        free-rotate
        id="model"
      ></a-entity>

      <!-- الإضاءة -->
      <a-light type="directional" intensity="1" position="1 3 1"></a-light>
      <a-light type="ambient" intensity="0.5"></a-light>
    </a-scene>

    <script>
      // مكون الدوران الحر
      AFRAME.registerComponent("free-rotate", {
        init: function () {
          this.isDragging = false; // لتعقب حالة السحب
          this.previousMousePosition = { x: 0, y: 0 }; // موقع الماوس السابق

          const object = this.el.object3D;

          // عند الضغط على زر الماوس
          this.el.sceneEl.canvas.addEventListener("mousedown", (event) => {
            this.isDragging = true;
            this.previousMousePosition = { x: event.clientX, y: event.clientY };
          });

          // عند تحريك الماوس
          this.el.sceneEl.canvas.addEventListener("mousemove", (event) => {
            if (!this.isDragging) return;

            const deltaX = event.clientX - this.previousMousePosition.x;
            const deltaY = event.clientY - this.previousMousePosition.y;

            const rotationSpeed = 0.005; // سرعة الدوران

            // تحديث دوران المجسم بناءً على حركة الماوس
            object.rotation.y += deltaX * rotationSpeed; // دوران حول المحور Y
            object.rotation.x += deltaY * rotationSpeed; // دوران حول المحور X

            this.previousMousePosition = { x: event.clientX, y: event.clientY };
          });

          // عند إفلات زر الماوس
          this.el.sceneEl.canvas.addEventListener("mouseup", () => {
            this.isDragging = false;
          });

          // عند خروج الماوس من النافذة
          this.el.sceneEl.canvas.addEventListener("mouseleave", () => {
            this.isDragging = false;
          });
        },
      });
    </script>
  </body>
</html>
