<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded>
      <!-- النموذج ثلاثي الأبعاد -->
      <a-entity
        gltf-model="https://raw.githubusercontent.com/doahmed123/my-project1/main/the_great_pyramid_of_giza_egypt.glb"
        position="0 1 -5"
        scale="3 3 3"
        rotation-control
        id="model"
      ></a-entity>

      <!-- الإضاءة -->
      <a-light type="directional" intensity="1" position="2 4 3"></a-light>
      <a-light type="ambient" intensity="0.7"></a-light>
    </a-scene>

    <script>
      // مكون التحكم اليدوي في دوران النموذج
      AFRAME.registerComponent("rotation-control", {
        init: function () {
          this.isDragging = false;
          this.previousMousePosition = { x: 0, y: 0 };

          // عند الضغط على الماوس
          this.el.sceneEl.addEventListener("mousedown", (event) => {
            this.isDragging = true;
            this.previousMousePosition = { x: event.clientX, y: event.clientY };
          });

          // عند تحريك الماوس
          this.el.sceneEl.addEventListener("mousemove", (event) => {
            if (!this.isDragging) return;

            const deltaX = event.clientX - this.previousMousePosition.x;
            const deltaY = event.clientY - this.previousMousePosition.y;

            const rotationSpeed = 0.2;
            const object = this.el.object3D;

            object.rotation.y += deltaX * rotationSpeed * 0.01;
            object.rotation.x += deltaY * rotationSpeed * 0.01;

            this.previousMousePosition = { x: event.clientX, y: event.clientY };
          });

          // عند إفلات زر الماوس
          this.el.sceneEl.addEventListener("mouseup", () => {
            this.isDragging = false;
          });

          // عند مغادرة الماوس للشاشة
          this.el.sceneEl.addEventListener("mouseleave", () => {
            this.isDragging = false;
          });
        },
      });
    </script>
  </body>
</html>
